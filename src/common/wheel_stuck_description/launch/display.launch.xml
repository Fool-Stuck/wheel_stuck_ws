<launch>
  <arg name="xacro_file" default="$(find-pkg-share wheel_stuck_description)/urdf/wheel_stuck.urdf.xacro" />
  <arg name="use_gui" default="true" />
  <arg name="use_sim_time" default="false" />

  <arg name="robot_description" default="$(command 'xacro $(var xacro_file)')"/>
  <node pkg="robot_state_publisher" exec="robot_state_publisher" output="screen">
    <param name="robot_description" value="$(var robot_description)"/>
  </node>

  <node pkg="joint_state_publisher" exec="joint_state_publisher">
    <param name="source_list" value="[robot_joint_states, joint_state_broadcaster/joint_states]"/>
  </node>
  
  <group if="$(var use_gui)">
    <node pkg="joint_state_publisher_gui" exec="joint_state_publisher_gui" name="joint_state_publisher_gui" output="screen"/>
  </group>
  <group unless="$(var use_gui)">
    <node pkg="joint_state_publisher" exec="joint_state_publisher" name="joint_state_publisher" output="screen"/>
  </group>

  <node pkg="rviz2" exec="rviz2">  <!-- -d $(var rviz_config_path)"> -->
    <param name="robot_description" value="$(var robot_description)"/>
    <param name="use_sim_time" value="$(var use_sim_time)" />
  </node>
  
</launch>
